FROM node:18.9.1-buster-slim

WORKDIR /usr/src/app

COPY --chown=node:node package.json .
COPY --chown=node:node yarn.lock .

RUN yarn install

COPY --chown=node:node . .

USER node:node
EXPOSE 3001

CMD [ "yarn", "start:dev"]